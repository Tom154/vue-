(function(t){function e(e){for(var a,s,o=e[0],c=e[1],u=e[2],d=0,f=[];d<o.length;d++)s=o[d],Object.prototype.hasOwnProperty.call(r,s)&&r[s]&&f.push(r[s][0]),r[s]=0;for(a in c)Object.prototype.hasOwnProperty.call(c,a)&&(t[a]=c[a]);l&&l(e);while(f.length)f.shift()();return i.push.apply(i,u||[]),n()}function n(){for(var t,e=0;e<i.length;e++){for(var n=i[e],a=!0,o=1;o<n.length;o++){var c=n[o];0!==r[c]&&(a=!1)}a&&(i.splice(e--,1),t=s(s.s=n[0]))}return t}var a={},r={app:0},i=[];function s(e){if(a[e])return a[e].exports;var n=a[e]={i:e,l:!1,exports:{}};return t[e].call(n.exports,n,n.exports,s),n.l=!0,n.exports}s.m=t,s.c=a,s.d=function(t,e,n){s.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},s.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},s.t=function(t,e){if(1&e&&(t=s(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(s.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var a in t)s.d(n,a,function(e){return t[e]}.bind(null,a));return n},s.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return s.d(e,"a",e),e},s.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},s.p="/";var o=window["webpackJsonp"]=window["webpackJsonp"]||[],c=o.push.bind(o);o.push=e,o=o.slice();for(var u=0;u<o.length;u++)e(o[u]);var l=c;i.push([0,"chunk-vendors"]),n()})({0:function(t,e,n){t.exports=n("56d7")},"0104":function(t,e,n){"use strict";n("b414")},"0ca0":function(t,e,n){"use strict";n("e9e4")},2718:function(t,e,n){},5391:function(t,e,n){},"56d7":function(t,e,n){"use strict";n.r(e);n("ab71");var a=n("58e6"),r=(n("5246"),n("6b41")),i=(n("a52c"),n("2ed4")),s=(n("537a"),n("ac28")),o=(n("4d48"),n("d1e1")),c=(n("81e6"),n("9ffb")),u=(n("4056"),n("44bf")),l=(n("c194"),n("7744")),d=(n("c3a6"),n("ad06")),f=(n("5852"),n("d961")),p=(n("2994"),n("2bdd")),h=(n("e260"),n("e6cf"),n("cca6"),n("a79d"),n("2b0e")),m=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("router-view")],1)},v=[],g={},b=g,y=n("2877"),_=Object(y["a"])(b,m,v,!1,null,null,null),w=_.exports,L=(n("ed90"),n("5a8b"),n("8c4f")),x=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("van-nav-bar",{attrs:{title:t.activeTitle,fixed:""}}),n("div",{staticClass:"main"},[n("router-view")],1),n("van-tabbar",{attrs:{route:""}},[n("van-tabbar-item",{attrs:{replace:"",to:"/layout/home",icon:"home-o"}},[t._v("首页")]),n("van-tabbar-item",{attrs:{replace:"",to:"/layout/search",icon:"search"}},[t._v("搜索")])],1)],1)},k=[],C={data:function(){return{activeTitle:this.$route.meta.title}},watch:{$route:function(){this.activeTitle=this.$route.meta.title}}},O=C,j=(n("c67e"),Object(y["a"])(O,x,k,!1,null,"205b271b",null)),S=j.exports,R=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("p",{staticClass:"title"},[t._v("推荐歌单")]),n("van-row",{attrs:{gutter:"6"}},t._l(t.reList,(function(e){return n("van-col",{key:e.id,attrs:{span:"8"}},[n("van-image",{attrs:{width:"100%",height:"3rem",fit:"cover",src:e.picUrl}}),n("p",{staticClass:"song_name"},[t._v(t._s(e.name))])],1)})),1),n("p",{staticClass:"title"},[t._v("最新音乐")]),t._l(t.songList,(function(t){return n("SongItem",{key:t.id,attrs:{name:t.name,author:t.song.artists[0].name,id:t.id}})}))],2)},$=[],E=n("1da1"),I=(n("96cf"),n("bc3a")),T=n.n(I);T.a.defaults.baseURL="http://localhost:3000";var F=T.a,P=function(t){return F({url:"/personalized",params:t})},q=function(t){return F({url:"/personalized/newsong",params:t})},z=function(t){return F({url:"/search/hot",params:t})},M=function(t){return F({url:"/cloudsearch",params:t})},U=function(t){return F({url:"/song/detail?ids=".concat(t),method:"GET"})},A=function(t){return F({url:"/lyric?id=".concat(t),method:"GET"})},D=function(t){return F({url:"/comment/album",params:t})},N=P,G=q,J=z,V=M,H=U,W=A,B=D,K=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("van-cell",{attrs:{center:"",title:t.name,label:t.author+" - "+t.name},on:{click:function(e){return t.$router.push({path:"/comment",query:{id:t.id}})}},scopedSlots:t._u([{key:"right-icon",fn:function(){return[n("van-icon",{attrs:{name:"play-circle-o",size:"0.6rem"},on:{click:t.playFn}})]},proxy:!0}])})},Q=[],X=(n("a9e3"),{props:{name:String,author:String,id:Number},methods:{playFn:function(){this.$router.push({path:"/play",query:{id:this.id}})}}}),Y=X,Z=(n("0ca0"),Object(y["a"])(Y,K,Q,!1,null,"26ad3422",null)),tt=Z.exports,et={data:function(){return{reList:[],songList:[]}},created:function(){var t=this;return Object(E["a"])(regeneratorRuntime.mark((function e(){var n,a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,N({limit:6});case 2:return n=e.sent,console.log(n),t.reList=n.data.result,e.next=7,G({limit:20});case 7:a=e.sent,console.log(a),t.songList=a.data.result;case 10:case"end":return e.stop()}}),e)})))()},components:{SongItem:tt}},nt=et,at=(n("77a4"),Object(y["a"])(nt,R,$,!1,null,"1d446b97",null)),rt=at.exports,it=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("van-search",{attrs:{shape:"round",placeholder:"请输入搜索关键词"},on:{input:t.inputFn},model:{value:t.value,callback:function(e){t.value=e},expression:"value"}}),0===t.resultList.length?n("div",{staticClass:"search_wrap"},[n("p",{staticClass:"hot_title"},[t._v("热门搜索")]),n("div",{staticClass:"hot_name_wrap"},t._l(t.hotArr,(function(e,a){return n("span",{key:a,staticClass:"hot_item",on:{click:function(n){return t.fn(e.first)}}},[t._v(t._s(e.first))])})),0)]):n("div",{staticClass:"search_wrap"},[n("p",{staticClass:"hot_title"},[t._v("最佳匹配")]),n("van-list",{attrs:{finished:t.finished,"finished-text":"没有更多了"},on:{load:t.onLoad},model:{value:t.loading,callback:function(e){t.loading=e},expression:"loading"}},t._l(t.resultList,(function(t){return n("SongItem",{key:t.id,attrs:{name:t.name,author:t.ar[0].name,id:t.id}})})),1)],1)],1)},st=[],ot=n("2909"),ct=(n("99af"),{data:function(){return{value:"",hotArr:[],resultList:[],loading:!1,finished:!1,page:1,timer:null}},created:function(){var t=this;return Object(E["a"])(regeneratorRuntime.mark((function e(){var n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,J();case 2:n=e.sent,console.log(n),t.hotArr=n.data.result.hots;case 5:case"end":return e.stop()}}),e)})))()},methods:{getListFn:function(){var t=this;return Object(E["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,V({keywords:t.value,limit:20,offset:20*(t.page-1)});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))()},fn:function(t){var e=this;return Object(E["a"])(regeneratorRuntime.mark((function n(){var a;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return e.page=1,e.finished=!1,e.value=t,n.next=5,e.getListFn();case 5:a=n.sent,console.log(a),e.resultList=a.data.result.songs,e.loading=!1;case 9:case"end":return n.stop()}}),n)})))()},inputFn:function(){var t=this;return Object(E["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:t.timer&&clearTimeout(t.timer),t.timer=setTimeout(Object(E["a"])(regeneratorRuntime.mark((function e(){var n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(t.page=1,t.finished=!1,0!==t.value.length){e.next=5;break}return t.resultList=[],e.abrupt("return");case 5:return e.next=7,t.getListFn();case 7:if(n=e.sent,console.log(n),void 0!==n.data.result.songs){e.next=12;break}return t.resultList=[],e.abrupt("return");case 12:t.resultList=n.data.result.songs,t.loading=!1;case 14:case"end":return e.stop()}}),e)}))),900);case 2:case"end":return e.stop()}}),e)})))()},onLoad:function(){var t=this;return Object(E["a"])(regeneratorRuntime.mark((function e(){var n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t.page++,e.next=3,t.getListFn();case 3:if(n=e.sent,void 0!==n.data.result.songs){e.next=8;break}return t.finished=!0,t.loading=!1,e.abrupt("return");case 8:t.resultList=[].concat(Object(ot["a"])(t.resultList),Object(ot["a"])(n.data.result.songs)),t.loading=!1;case 10:case"end":return e.stop()}}),e)})))()}},components:{SongItem:tt}}),ut=ct,lt=(n("b7b9"),Object(y["a"])(ut,it,st,!1,null,"7c2bf3ca",null)),dt=lt.exports,ft=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"play"},[n("div",{staticClass:"song-bg",style:"background-image: url("+(t.songInfo&&t.songInfo.al&&t.songInfo.al.picUrl)+"?imageView&thumbnail=360y360&quality=75&tostatic=0);"}),n("div",{staticClass:"header"},[n("van-icon",{staticClass:"left-incon",attrs:{name:"arrow-left",size:"20"},on:{click:function(e){return t.$router.back()}}})],1),n("div",{staticClass:"song-wrapper"},[n("div",{staticClass:"song-turn ani",style:"animation-play-state:"+(t.playState?"running":"paused")},[n("div",{staticClass:"song-img"},[n("img",{staticStyle:{width:"100%"},attrs:{src:(t.songInfo&&t.songInfo.al&&t.songInfo.al.picUrl)+"?imageView&thumbnail=360y360&quality=75&tostatic=0",alt:""}})])]),n("div",{staticClass:"start-box",on:{click:t.audioStart}},[n("span",{directives:[{name:"show",rawName:"v-show",value:!t.playState,expression:"!playState"}],staticClass:"song-start"})]),n("div",{staticClass:"song-msg"},[n("h2",{staticClass:"m-song-h2"},[n("span",{staticClass:"m-song-sname"},[t._v(t._s(t.songInfo.name)+"-"+t._s(t.songInfo&&t.songInfo.ar&&t.songInfo.ar[0].name))])]),n("div",{staticClass:"lrcContent"},[n("p",{staticClass:"lrc"},[t._v(t._s(t.curLyric))])])]),n("div",{staticClass:"needle",style:"transform: rotate("+t.needleDeg+");"})]),n("audio",{ref:"audio",attrs:{preload:"true",src:"https://music.163.com/song/media/outer/url?id="+t.id+".mp3"}})])},pt=[],ht=n("ade3"),mt=(n("b0c0"),n("ac1f"),n("466d"),n("fb6a"),n("1276"),n("159b"),{components:Object(ht["a"])({},d["a"].name,d["a"]),name:"play",data:function(){return{playState:!1,id:this.$route.query.id,songInfo:{},lyric:{},curLyric:"",lastLy:""}},computed:{needleDeg:function(){return this.playState?"-7deg":"-38deg"}},methods:{getSong:function(){var t=this;return Object(E["a"])(regeneratorRuntime.mark((function e(){var n,a,r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,H(t.id);case 2:return n=e.sent,t.songInfo=n.data.songs[0],e.next=6,W(t.id);case 6:a=e.sent,r=a.data.lrc.lyric,t.lyric=t._formatLyr(r),t.curLyric=t.lyric[0];case 10:case"end":return e.stop()}}),e)})))()},_formatLyr:function(t){var e=/\[.+?\]/g,n=t.match(e);console.log(n);var a=t.split(/\[.+?\]/).slice(1);console.log(a);var r={};return n.forEach((function(t,e){var n=60*t.split(":")[0].split("")[2],i="0"===t.split(":")[1].split(".")[0].split("")[0]?t.split(":")[1].split(".")[0].split("")[1]:t.split(":")[1].split(".")[0];r[n+Number(i)]=a[e]})),console.log(r),r},audioStart:function(){this.playState?this.$refs.audio.pause():this.$refs.audio.play(),this.playState=!this.playState},showLyric:function(){var t=this;this.$refs.audio.addEventListener("timeupdate",(function(){var e=Math.floor(t.$refs.audio.currentTime);t.lyric[e]?(t.curLyric=t.lyric[e],t.lastLy=t.curLyric):t.curLyric=t.lastLy}))}},mounted:function(){this.getSong(),this.showLyric(),console.log(this.$route.query.id)}}),vt=mt,gt=(n("9d51"),Object(y["a"])(vt,ft,pt,!1,null,"696771fe",null)),bt=gt.exports,yt=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("van-nav-bar",{attrs:{title:"评论",fixed:"","left-arrow":""},on:{"click-left":function(e){return t.$router.back()}}}),n("van-pull-refresh",{staticClass:"main",on:{refresh:t.onRefresh},model:{value:t.isLoading,callback:function(e){t.isLoading=e},expression:"isLoading"}},[n("van-list",{attrs:{finished:t.finished,"finished-text":"没有更多了"},on:{load:t.onLoad},model:{value:t.loading,callback:function(e){t.loading=e},expression:"loading"}},[t._l(t.list,(function(e,a){return n("van-cell",{key:a,staticClass:"main"},[n("img",{attrs:{src:e.user.avatarUrl}}),n("span",[t._v(t._s(e.user.nickname))]),t._v(" "),n("span",[t._v(t._s(e.time))]),n("div",[t._v(t._s(e.likedCount)+"点赞")]),n("div",[t._v(t._s(e.content))])])})),n("div",[n("span",[t._v("1111")])]),n("div",[n("span",[t._v("1111")])]),n("div",[n("span",[t._v("1111")])]),n("div",[n("span",[t._v("1111")])]),n("div",[n("span",[t._v("1111")])]),n("div",[n("span",[t._v("1111")])])],2)],1)],1)},_t=[],wt={data:function(){return{list:[],isLoading:!1,loading:!1,finished:!1,page:0}},methods:{getList:function(){var t=this;return Object(E["a"])(regeneratorRuntime.mark((function e(){var n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,B({id:t.$route.query.id,limit:20,offset:20*(t.page-1)});case 2:n=e.sent,n.data.comments.forEach((function(e){return t.list.push(e)})),t.isLoading=!1,t.loading=!1;case 6:case"end":return e.stop()}}),e)})))()},onRefresh:function(){this.list=[],this.page=1,this.getList()},onLoad:function(){this.page++,this.getList(),this.loading=!1,this.finished=!0}}},Lt=wt,xt=(n("0104"),Object(y["a"])(Lt,yt,_t,!1,null,"cc3e122a",null)),kt=xt.exports;h["a"].use(L["a"]);var Ct=[{path:"/",redirect:"/layout"},{path:"/layout",component:S,redirect:"/layout/home",children:[{path:"home",component:rt,meta:{title:"首页"}},{path:"search",component:dt,meta:{title:"搜索"}}]},{path:"/play",component:bt},{path:"/comment",component:kt}],Ot=new L["a"]({routes:Ct}),jt=Ot;h["a"].use(p["a"]),h["a"].use(f["a"]),h["a"].use(d["a"]),h["a"].use(l["a"]),h["a"].use(u["a"]),h["a"].use(c["a"]),h["a"].use(o["a"]),h["a"].use(s["a"]),h["a"].use(i["a"]),h["a"].use(r["a"]),h["a"].use(a["a"]),h["a"].config.productionTip=!1,new h["a"]({router:jt,render:function(t){return t(w)}}).$mount("#app")},"5a8b":function(t,e,n){},"71fa":function(t,e,n){},"77a4":function(t,e,n){"use strict";n("97f7")},"97f7":function(t,e,n){},"9d51":function(t,e,n){"use strict";n("2718")},b414:function(t,e,n){},b7b9:function(t,e,n){"use strict";n("71fa")},c67e:function(t,e,n){"use strict";n("5391")},e9e4:function(t,e,n){},ed90:function(t,e){(function(t,e){var n=e.documentElement,a=t.devicePixelRatio||1;function r(){e.body?e.body.style.fontSize=12*a+"px":e.addEventListener("DOMContentLoaded",r)}function i(){var t=n.clientWidth/10;n.style.fontSize=t+"px"}if(r(),i(),t.addEventListener("resize",i),t.addEventListener("pageshow",(function(t){t.persisted&&i()})),a>=2){var s=e.createElement("body"),o=e.createElement("div");o.style.border=".5px solid transparent",s.appendChild(o),n.appendChild(s),1===o.offsetHeight&&n.classList.add("hairlines"),n.removeChild(s)}})(window,document)}});
//# sourceMappingURL=app.a4520edb.js.map